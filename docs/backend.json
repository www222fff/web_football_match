
{
  "entities": {
    "Tournament": {
      "title": "Tournament",
      "type": "object",
      "description": "Represents a football tournament edition.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the tournament edition (e.g., '第七届')."
        },
        "year": {
          "type": "number",
          "description": "The year the tournament is held."
        }
      },
      "required": ["name", "year"]
    },
    "Team": {
      "title": "Team",
      "type": "object",
      "description": "Represents a participating team.",
      "properties": {
        "name": { "type": "string", "description": "Name of the team." },
        "logoImageId": { "type": "string", "description": "ID for the team's logo from placeholder images." },
        "coach": { "type": "string", "description": "Name of the team's coach." },
        "tournamentId": { "type": "string", "description": "The ID of the tournament this team belongs to." }
      },
      "required": ["name", "logoImageId", "coach", "tournamentId"]
    },
    "Player": {
      "title": "Player",
      "type": "object",
      "description": "Represents a player in a team.",
      "properties": {
        "name": { "type": "string", "description": "Name of the player." },
        "position": { "type": "string", "description": "Player's position." },
        "number": { "type": "number", "description": "Player's jersey number." },
        "imageId": { "type": "string", "description": "ID for the player's photo from placeholder images." },
        "teamId": { "type": "string", "description": "Reference to the Player's Team." },
        "stats": {
          "type": "object",
          "properties": {
            "goals": { "type": "number" },
            "assists": { "type": "number" },
            "gamesPlayed": { "type": "number" },
            "yellowCards": { "type": "number" },
            "redCards": { "type": "number" },
            "shotsPerGame": { "type": "number" },
            "passSuccessRate": { "type": "number" }
          }
        }
      },
      "required": ["name", "position", "number", "imageId", "teamId", "stats"]
    },
    "MatchSchedule": {
      "title": "MatchSchedule",
      "type": "object",
      "description": "Represents the schedule for a specific match.",
      "properties": {
        "team1Id": { "type": "string" },
        "team2Id": { "type": "string" },
        "date": { "type": "string", "format": "date" },
        "time": { "type": "string" },
        "venue": { "type": "string" },
        "status": { "type": "string", "enum": ["scheduled", "live", "finished"] },
        "tournamentId": { "type": "string" },
        "score": {
          "type": "object",
          "properties": {
            "team1": { "type": "number" },
            "team2": { "type": "number" }
          }
        }
      },
      "required": ["team1Id", "team2Id", "date", "time", "venue", "status", "tournamentId"]
    },
    "MatchEvent": {
        "title": "MatchEvent",
        "type": "object",
        "description": "Represents a single event within a match.",
        "properties": {
            "minute": { "type": "number" },
            "type": { "type": "string", "enum": ["goal", "yellow-card", "red-card"] },
            "playerId": { "type": "string" },
            "teamId": { "type": "string" }
        },
        "required": ["minute", "type", "playerId", "teamId"]
    }
  },
  "auth": {
    "providers": ["anonymous"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/tournaments/{tournamentId}",
        "definition": {
          "entityName": "Tournament",
          "schema": { "$ref": "#/backend/entities/Tournament" },
          "description": "Stores high-level information for each tournament edition."
        }
      },
      {
        "path": "/teams/{teamId}",
        "definition": {
          "entityName": "Team",
          "schema": { "$ref": "#/backend/entities/Team" },
          "description": "Stores all teams across all tournaments. Each team document includes a 'tournamentId' to scope it to a specific edition."
        }
      },
      {
        "path": "/players/{playerId}",
        "definition": {
          "entityName": "Player",
          "schema": { "$ref": "#/backend/entities/Player" },
          "description": "Stores all players. Each player has a 'teamId' which links them to a team, and through the team, to a tournament."
        }
      },
      {
        "path": "/match_schedules/{matchScheduleId}",
        "definition": {
          "entityName": "MatchSchedule",
          "schema": { "$ref": "#/backend/entities/MatchSchedule" },
          "description": "Stores all matches. Each match has a 'tournamentId'."
        }
      },
      {
          "path": "/match_schedules/{matchScheduleId}/events/{eventId}",
          "definition": {
            "entityName": "MatchEvent",
            "schema": { "$ref": "#/backend/entities/MatchEvent" },
            "description": "Subcollection for events within a specific match."
          }
      }
    ],
    "reasoning": "This structure supports multiple tournament editions. Top-level collections for 'teams', 'players', and 'match_schedules' contain a 'tournamentId' field to allow for efficient querying of data for a specific edition, while still maintaining a flat hierarchy. Match events are stored in a subcollection under each match for clear organization."
  }
}
